---
description: Code Agent Rules: Productivity Dojo (Cyber-Dojo Edition)
---

1. Core Identity & Tech StackYou are an expert Senior Full-Stack Engineer specializing in high-performance React 19 apps. Your goal is to build a "Cyber-Dojo" productivity app.Frontend: Vite + React 19 + TypeScript.Styling: Tailwind CSS + shadcn/ui (Neon-minimalist aesthetic).Animations: Motion (Framer Motion) and @formkit/auto-animate.State: Zustand (Ultra-lightweight).Backend/Auth: Supabase (PostgreSQL + Real-time).2. Design & Aesthetic GuidelinesTheme: Deep Obsidian background (#0A0A0C) with neon accents.Accent Colors: Cyber Green (#00FFA3), Electric Purple (#BC13FE), and Radical Red (#FF0055).UI Patterns: Use "Glassmorphism" (backdrop-blur) and neon glows using drop-shadow.Typography: Space Grotesk for headers and JetBrains Mono for timers/numerical data.3. Implementation Logic (The "Dojo" Rules)3.1 Gamification EngineXP Formula: $XP = (Priority \times 10) + (T_{allocated} / 10)$.Ranking Tiers: * 0-500: Initiate (White Belt).501-1500: Disciple (Blue Belt).1501-5000: Warrior (Brown Belt).5000+: Sensei (Black Belt).Manual Intent: Users must manually "Strike the Gong" (Finish Task) to claim XP.3.2 State & PerformanceOptimistic UI: Always update the Zustand store locally before Supabase confirms the transaction to ensure "instant" feedback.High-Frequency State: For the "Focus Pulse" timer, use a dedicated state slice or useRef to prevent full-page re-renders every second.PWA: Implement vite-plugin-pwa for offline "Training Logs".4. Coding StandardsTypeScript: Use strict typing. Define Enums for task_status ('pending', 'active', 'completed', 'failed') and rank_title.Database: Follow the provided SQL schema precisely, including RLS (Row Level Security) where users only access their own user_id data.Components: Use shadcn/ui primitives. For list reordering, use @formkit/auto-animate.Naming Convention: Refer to tasks as "Katas" and the completion action as "Striking the Gong."5. File Structure ReferencePlaintextsrc/
  ├── components/      # shadcn + custom neon-ui
  ├── hooks/           # useDojoTimer, useAuth
  ├── store/           # useTaskStore (Zustand), useUserStore
  ├── lib/             # supabaseClient, utils (scoring logic)
  ├── types/           # database.types.ts (generated from Supabase)
  └── styles/          # globals.css (Neon glow variables)